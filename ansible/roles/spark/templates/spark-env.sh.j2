#!/bin/bash
# Ansible Managed - Spark Environment Configuration

# Java
export JAVA_HOME={{ java_home }}

# Spark Configuration
export SPARK_HOME={{ spark_home }}
export SPARK_MASTER_HOST={{ spark_master_host }}
export SPARK_MASTER_PORT={{ spark_master_port }}
export SPARK_MASTER_WEBUI_PORT={{ spark_master_webui_port }}
export SPARK_WORKER_WEBUI_PORT={{ spark_worker_webui_port }}

# Worker Configuration
export SPARK_WORKER_CORES={{ spark_worker_cores }}
export SPARK_WORKER_MEMORY={{ spark_worker_memory }}
export SPARK_WORKER_DIR=/data/spark

# Log Configuration
export SPARK_LOG_DIR=/var/log/spark
export SPARK_PID_DIR=/var/run/spark

# Executor Configuration
export SPARK_EXECUTOR_MEMORY={{ spark_executor_memory }}

# Driver Configuration
export SPARK_DRIVER_MEMORY={{ spark_driver_memory }}

# Python
export PYSPARK_PYTHON=/usr/bin/python3
export PYSPARK_DRIVER_PYTHON=/usr/bin/python3

# AWS Configuration
export AWS_REGION={{ aws_region }}

# Hadoop Configuration for S3
export HADOOP_CONF_DIR={{ spark_home }}/conf

# History Server
export SPARK_HISTORY_OPTS="-Dspark.history.fs.logDirectory=/var/log/spark/history"

# Path
export PATH=$JAVA_HOME/bin:$SPARK_HOME/bin:$SPARK_HOME/sbin:$PATH
